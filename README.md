# search-service


# Задание 1.

Существует некоторая система, развернутая внутри chroot окружений. На 10 хостах, используются различные ОС (RHEL Server release 7.4, Ubuntu 18.04.5 LTS, CentOS Linux release 7.9.2009). Сервис написан на python 2.7 и для своей работы использует Redis, MySQL (master-master), MySQL Proxy, Apache, Nginx.
Для повышения отказоустойчивости, скорости развертывания новых компонентов, руководство приняло решение о внедрении контейнеризации и перенести эти сервисы в docker контейнеры, предварительно продумав архитектуру и их взаимодействие.

Задание поручили вам, опишите, максимально подробно, по шагам, отражая все технические детали, решение этой задачи. 

Что ожидаем на выходе:

Компонентную схему контейнеров, с обоснованием декомпозиции с точки зрения отказоустойчивости;

Описание образов необходимых контейнеров;	

Подробное описание процесса развертывания на новом хосте;

За исключением python, версиями остального ПО можно пренебречь.

# Задание 2.

Необходимо реализовать сервис поиска учетной записи, привязанной к устройству с последующей отправкой во внешний сервис.

Необходимо развернуть clickhouse , создать и наполнить сгенерированными данными таблицу, содержащую поля:

username

ipv4

mac

Реализовать сервис, который решает следующие задачи:

Читает очередь задач на поиск из redis

Формат полей объекта очереди:

id

ipv4

mac

Осуществляет поиск username в clickhouse по полям ipv4, mac

Если username удалось получить, то осуществляет отправку результирующего JSON во внешний сервис (для теста https://pastebin.com/)

Сохраняет url на рез-тат успешного поиска в файл

# Общие требования

Python 2.7+;

Зависимости на ваше усмотрение;

Параллельная обработка очереди;

Быть надежным. Учитывать корнер кейсы н.п. недоступность СУБД, внешнего сервиса и т.п.

